# Scheduling

Scheduling 是指如何安排 Pod 到哪個 Node 上。

在 pod 的 yaml 中，spec.nodeName 可以指定 pod 要跑在哪個 node 上。預設沒有這個 key，所以剛創建的 pod 會是 pending 的狀態。

Kubernetes 發現沒有這個 key 的 pod 後，會按照 scheduling algorithm 來安排 pod 放到哪個 node 上，並加入 nodeName。

## Manual Scheduling

如果不想要用 Kubernetes 自動安排 pod ，則根據以下兩種情況，可以手動指定 pod 要跑在哪個 node 上：

- 創建 pod
    - 在 yaml 中 spec.nodeName 指定 nodeName
    - 在命令列指定 nodeName
- 已運行的 pod
    - 用 Pod 的 Binding API 提交 nodeName 變更

Binding API 的範例：

```yaml
apiVersion: v1
kind: Binding
metadata:
  name: mypod
target:
  apiVersion: v1
  kind: Pod
  name: mypod
  namespace: default
```

```
curl -k -X POST http://$server:$port/api/v1/namespaces/default/pods/mypod/binding -H "Content-Type: application/json" -d '{"apiVersion":"v1","kind":"Binding","metadata":{"name":"mypod"},"target":{"apiVersion":"v1","kind":"Pod","name":"mypod","namespace":"default"}}'
```




